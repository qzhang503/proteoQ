group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rda"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rds"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
View(entrez)
View(acc_lookup)
library(proteoQDA)
data(F003590)
dim(F003590)
head(100)
head(F003590)
length(F003590)
data(F003591)
length(F003591)
data(F003593)
length(F003593)
data(F003594)
length(F003594)
data(F003595)
length(F003595)
data(F003597)
length(F003597)
data(F003598)
length(F003598)
data(F003602)
length()
length(F003602)
data(F003603)
length(F003603)
data(F003604)
length(F003604)
data(F003605)
length()
length(F003605)
data(F003606)
length(F003606)
data(msms_bi_1)
dim(msms_bi_1)
data(msms_bi_2)
nrow(msms_bi_2)
data(msms_jhu_1)
nrow(msms_jhu_1)
data(msms_jhu_2)
nrow(msms_jhu_2)
data(msms_pnnl_1)
nrow(msms_pnnl_1)
data(msms_pnnl_2)
nrow(msms_pnnl_2)
data(msms_bi_p1)
nrow(msms_bi_p1)
data(msms_bi_p2)
nrow(msms_bi_p2)
data(msms_jhu_p1)
nrow(msms_jhu_p1)
data(msms_jhu_p2)
nrow(msms_jhu_p2)
data(msms_pnnl_p1)
nrow(msms_pnnl_p1)
data(msms_pnnl_p2)
nrow(msms_pnnl_p2)
data(PSMexport_bi_1)
nrow(PSMexport_bi_1)
data(PSMexport_bi_2)
nrow(PSMexport_bi_2)
data(PSMexport_jhu_1)
nrow(PSMexport_jhu_1)
data(PSMexport_jhu_2)
nrow(PSMexport_jhu_2)
data(PSMexport_pnnl_1)
nrow(PSMexport_pnnl_1)
data(PSMexport_pnnl_2)
nrow(PSMexport_pnnl_2)
data(PSMexport_bi_p1)
nrow(PSMexport_bi_p1)
data(PSMexport_bi_p2)
nrow(PSMexport_bi_p2)
data(PSMexport_jhu_p1)
nrow(PSMexport_jhu_p1)
data(PSMexport_jhu_p2)
nrow(PSMexport_jhu_p2)
data(PSMexport_pnnl_p1)
nrow(PSMexport_pnnl_p1)
data(PSMexport_pnnl_p2)
nrow(PSMexport_pnnl_p2)
foo_combine_codes <- function (filepath = file.path("C:\\Results\\R\\proteoQ\\R")) {
# filepath <- file.path("C:\\Results\\R\\proteoQ\\R")
filenames <- dir(filepath, pattern = ".R$")
dir.create(file.path(filepath, "temp"))
map(file.path(filepath, filenames), readLines) %>%
reduce(`c`, init = NULL) %>%
writeLines(file.path(filepath, "temp\\all.R"))
}
foo_combine_codes
foo_combine_codes()
library(magrittr)
foo_combine_codes()
foo_combine_codes <- function (filepath = file.path("C:\\Results\\R\\proteoQ\\R")) {
# filepath <- file.path("C:\\Results\\R\\proteoQ\\R")
filenames <- dir(filepath, pattern = ".R$")
dir.create(file.path(filepath, "temp"))
purrr::map(file.path(filepath, filenames), readLines) %>%
reduce(`c`, init = NULL) %>%
writeLines(file.path(filepath, "temp\\all.R"))
}
foo_combine_codes()
foo_combine_codes()
library(purrr)
foo_combine_codes()
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?load_expts
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?load_expts
library(proteoQ)
?load_expts
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "~\\proteoQ\\examples"
load_expts()
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?load_eload
?load_expts
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?load_expts
?normPSM
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?load_expts
?normPSM
?PSM2Pep
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?PSM2Pep
?mergePep
?standPep
?Pep2Prn
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?standPrn
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?purgePSM
?purgePep
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnHist
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnMDS
?prnPCA
?prnEucDist
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnCorr_logFC
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnHM
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnSig
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnVol
?gspaMap
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?anal_prnTrend
?plot_prnTrend
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?plot_metaNMF
?plot_pepNMFCon
?plot_pepNMFCoef
?anal_prnNMF
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnGSPAHM
?prnGSPA
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnGSVA
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
?prnGSEA
?prepGP
?prepGO
?normPSM
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
library(proteoQDA)
db_path <- "~\\proteoQ\\dbs\\fasta\\refseq"
copy_refseq_hs(db_path)
copy_refseq_mm(db_path)
dat_dir <- "~\\proteoQ\\custom_refseq_lookups"
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
copy_global_mascot(dat_dir)
library(proteoQ)
dat_dir <- "~\\proteoQ\\custom_refseq_lookups"
load_expts()
Ref2Entrez(species = human)
Ref2Entrez(species = mouse)
head(readRDS(file.path("~\\proteoQ\\dbs\\entrez\\refseq_entrez_hs.rds")))
head(readRDS(file.path("~\\proteoQ\\dbs\\entrez\\refseq_entrez_mm.rds")))
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\refseq_entrez_hs.rds",
"~\\proteoQ\\dbs\\entrez\\refseq_entrez_mm.rds"),
)
devtools::install("C:\\Results\\R\\proteoQ")
install.packages("plyr")
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
devtools::install(pkg  = "C:\\Results\\R\\proteoq")
library(proteoQ)
library(proteoQDA)
db_path <- "~\\proteoQ\\dbs\\fasta\\uniprot"
copy_uniprot_hs(db_path)
copy_uniprot_mm(db_path)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
copy_global_maxquant(dat_dir)
library(proteoQDA)
db_path <- "~\\proteoQ\\dbs\\fasta\\uniprot"
copy_uniprot_hs(db_path)
copy_uniprot_mm(db_path)
# Prep II: copy metadata and PSMs if not yet
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
# (for Mascot, use `copy_global_mascot()`)
# (for Spectrum Mill, use `copy_global_sm()`)
copy_global_maxquant(dat_dir)
proteoQ::simulUniprotPSM(MaxQuant)
proteoQ::simulUniprotPSM(MaxQuant)
?proteoQ::simulUniprotPSM
simulUniprotPSM(MaxQuant)
proteoQ:::simulUniprotPSM(MaxQuant)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
load_expts()
library(proteoQ)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
load_expts()
load_expts()
library(proteoQ)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
load_expts()
?load_expts
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
load_expts()
devtools::install("C:\\Results\\R\\proteoQ")
library(proteoQ)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
load_expts()
Uni2Entrez(species = human)
Uni2Entrez(species = mouse)
# head(readRDS(file.path("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rds")))
# head(readRDS(file.path("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_mm.rds")))
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta",
"~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_mm_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rds",
"~\\proteoQ\\dbs\\entrez\\uniprot_entrez_mm.rds"),
)
dat_dir <- "~\\proteoQ\\examples"
load_expts()
knitr::opts_chunk$set(
collapse = TRUE,
out.width='.40\\linewidth',
fig.width=3,
fig.height=3,
fig.show='hold',
fig.align='center',
comment = "#>"
)
df <- readr::read_tsv(file.path(dat_dir, "Protein\\Protein.txt"))
n_not_na <- df %>%
dplyr::select(grep("Z_log2_R", names(.))) %>%
dplyr::select(-grep("\\(Ref|\\(Empty", names(.))) %>%
is.na() %>%
`!`() %>%
rowSums()
df <- readr::read_tsv(file.path(dat_dir, "Protein\\Protein.txt"))
library(magrittr)
n_not_na <- df %>%
dplyr::select(grep("Z_log2_R", names(.))) %>%
dplyr::select(-grep("\\(Ref|\\(Empty", names(.))) %>%
is.na() %>%
`!`() %>%
rowSums()
df %>%
dplyr::mutate(n_not_na = n_not_na) %>%
readr::write_tsv(file.path(dat_dir, "Protein\\Protein.txt"))
prnHM(
# need to specify the file path to `df`; otherwise,
# higher precedence will give to "Protein\\Model\\Protein_pVals.txt"
# where column `na_counts` may not exist
# df = "Protein\\Protein.txt",
xmin = -1,
xmax = 1,
xmargin = 0.1,
annot_cols = c("Group", "Color", "Alpha", "Shape"),
annot_colnames = c("Group", "Lab", "Batch", "WHIM"),
cluster_rows = TRUE,
cutree_rows = 10,
show_rownames = FALSE,
show_colnames = TRUE,
fontsize_row = 3,
cellwidth = 14,
width = 18,
height = 12,
filter_prots_by_sp_npep = exprs(n_not_na <= 5),
filename = "na5.png",
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
prnHM(
# df = "Protein\\Protein.txt",
xmin = -1,
xmax = 1,
xmargin = 0.1,
annot_cols = c("Group", "Color", "Alpha", "Shape"),
annot_colnames = c("Group", "Lab", "Batch", "WHIM"),
cluster_rows = TRUE,
cutree_rows = 10,
show_rownames = FALSE,
show_colnames = TRUE,
fontsize_row = 3,
cellwidth = 14,
width = 18,
height = 12,
filter_prots_by_sp_npep = exprs(n_not_na <= 5),
filename = "na5.png",
)
names(df)
df$na_counts <- NULL
temp <- df %>%
filters_in_call(!!!filter_dots)
filter_dots
View(temp)
temp <- df %>%
filters_in_call(!!!filter_dots)
i = 1
row_exprs
dim(df)
head(df$n_not_na)
row_exprs
sum(row_vals)
nms
dots
names(df)
row_exprs
which(row_vals)
df[631, ]
temp = row_exprs %>%
purrr::map(eval_tidy, df)
which(temp)
which(temp[[1]])
temp = eval(row_exprs, df)
which(temp[[1]])
?eval
row_exprs
temp <- eval_tidy(row_exprs, df)
row_exprs
row_exprs
df %>% filter(n_not_na <= 5)
temp = df %>% filter(n_not_na <= 5)
df$n_not_na
View(temp)
df <- readr::read_tsv(file.path(dat_dir, "Protein\\Model\\Protein_pVals.txt"))
n_not_na <- df %>%
dplyr::select(grep("Z_log2_R", names(.))) %>%
dplyr::select(-grep("\\(Ref|\\(Empty", names(.))) %>%
is.na() %>%
`!`() %>%
rowSums()
df %>%
dplyr::mutate(na_counts = na_counts) %>%
readr::write_tsv(file.path(dat_dir, "Protein\\Model\\Protein_pVals.txt"))
prnHM(
df = "Protein\\Protein.txt",
xmin = -1,
xmax = 1,
xmargin = 0.1,
annot_cols = c("Group", "Color", "Alpha", "Shape"),
annot_colnames = c("Group", "Lab", "Batch", "WHIM"),
cluster_rows = TRUE,
cutree_rows = 10,
show_rownames = FALSE,
show_colnames = TRUE,
fontsize_row = 3,
cellwidth = 14,
width = 18,
height = 12,
filter_prots_by_sp_npep = exprs(n_not_na <= 5),
filename = "mostly_na_vals.png",
)
df <- readr::read_tsv(file.path(dat_dir, "Protein\\Protein.txt"))
library(magrittr)
n_not_na <- df %>%
dplyr::select(grep("Z_log2_R", names(.))) %>%
dplyr::select(-grep("\\(Ref|\\(Empty", names(.))) %>%
is.na() %>%
`!`() %>%
rowSums()
df %>%
dplyr::mutate(n_not_na = n_not_na) %>%
readr::write_tsv(file.path(dat_dir, "Protein\\Protein.txt"))
prnHM(
df = "Protein\\Protein.txt",
xmin = -1,
xmax = 1,
xmargin = 0.1,
annot_cols = c("Group", "Color", "Alpha", "Shape"),
annot_colnames = c("Group", "Lab", "Batch", "WHIM"),
cluster_rows = TRUE,
cutree_rows = 10,
show_rownames = FALSE,
show_colnames = TRUE,
fontsize_row = 3,
cellwidth = 14,
width = 18,
height = 12,
filter_prots_by_sp_npep = exprs(n_not_na <= 5),
filename = "mostly_na_vals.png",
)
prnHM(
df = "Protein\\Protein.txt",
xmin = -1,
xmax = 1,
xmargin = 0.1,
annot_cols = c("Group", "Color", "Alpha", "Shape"),
annot_colnames = c("Group", "Lab", "Batch", "WHIM"),
cluster_rows = TRUE,
cutree_rows = 10,
show_rownames = FALSE,
show_colnames = TRUE,
fontsize_row = 3,
cellwidth = 14,
width = 18,
height = 12,
filter_prots_by_sp_npep = exprs(n_not_na <= 10),
filename = "mostly_na_vals.png",
)
library(proteoQ)
simulUniprotPSM(MaxQuant)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
simulUniprotPSM(MaxQuant)
foo_combine_codes <- function (filepath = file.path("C:\\Results\\R\\proteoQ\\R")) {
# filepath <- file.path("C:\\Results\\R\\proteoQ\\R")
filenames <- dir(filepath, pattern = ".R$")
dir.create(file.path(filepath, "temp"))
purrr::map(file.path(filepath, filenames), readLines) %>%
reduce(`c`, init = NULL) %>%
writeLines(file.path(filepath, "temp\\all.R"))
}
foo_combine_codes()
library(magrittr)
foo_combine_codes()
foo_combine_codes <- function (filepath = file.path("C:\\Results\\R\\proteoQ\\R")) {
# filepath <- file.path("C:\\Results\\R\\proteoQ\\R")
filenames <- dir(filepath, pattern = ".R$")
dir.create(file.path(filepath, "temp"))
purrr::map(file.path(filepath, filenames), readLines) %>%
purrr::reduce(`c`, init = NULL) %>%
writeLines(file.path(filepath, "temp\\all.R"))
}
foo_combine_codes()
?writeLines
foo_combine_codes()
?Uni2Entrez
library(proteoQ)
?Uni2Entrez
library(devtools)
setwd("C:\\Results\\
R\\proteoQ")
setwd("C:\\Results\\R\\proteoQ")
document()
install()

group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
p
?stat_summary
ggplot() +
geom_violin(df_int, mapping = aes(x = Channel, y = log10(Intensity), fill = Channel), size = .25) +
geom_boxplot(df_int, mapping = aes(x = Channel, y = log10(Intensity)), width = 0.2, lwd = .2, fill = "white") +
stat_summary(df_int, mapping = aes(x = Channel, y = log10(Intensity)), fun = "mean", geom = "point",
shape = 23, size = 2, fill = "white", alpha = .5)
ggplot() +
geom_violin(df_int, mapping = aes(x = Channel, y = log10(Intensity), fill = Channel), size = .25) +
geom_boxplot(df_int, mapping = aes(x = Channel, y = log10(Intensity)), width = 0.2, lwd = .2, fill = "white") +
stat_summary(df_int, mapping = aes(x = Channel, y = log10(Intensity)), fun.y = "mean", geom = "point",
shape = 23, size = 2, fill = "white", alpha = .5)
ggplot() +
geom_violin(df_int, mapping = aes(x = Channel, y = log10(Intensity), fill = Channel), size = .25) +
geom_boxplot(df_int, mapping = aes(x = Channel, y = log10(Intensity)), width = 0.2, lwd = .2, fill = "white") +
stat_summary(df_int, mapping = aes(x = Channel, y = log10(Intensity)), fun = "mean", geom = "point",
shape = 23, size = 2, fill = "white", alpha = .5) +
labs(title = expression("Reporter ions"), x = expression("Channel"), y = expression("Intensity ("*log[10]*")")) +
geom_text(data = mean_int, aes(x = Channel, label = Intensity, y = Intensity + 0.2), size = 5, colour = "red", alpha = .5) +
theme_psm_violin
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM_mq(group_psm_by, group_pep_by, fasta, expt_smry, rm_krts,
plot_rptr_int, plot_log2FC_cv, use_lowercase_aa, ...)
options()$warn
temp <- df %>%
dplyr::select(!!rlang::sym(group_psm_by), !!rlang::sym(group_pep_by))
temp <- df %>%
dplyr::select(!!rlang::sym(group_psm_by), !!rlang::sym(group_pep_by)) %>%
dplyr::group_by(!!rlang::sym(group_pep_by))
temp <- df %>%
dplyr::select(!!rlang::sym(group_psm_by), !!rlang::sym(group_pep_by))
View(temp)
temp2 <- temp %>%
dplyr::filter(is.na(gene))
View(temp2)
temp2 <- df %>%
dplyr::filter(is.na(gene))
View(temp2)
temp2 <- temp %>%
dplyr::filter(is.na(gene)) %>%
replace_na_genes(acc_type)
na_genes_by_acc <- function(df) {
stopifnot("prot_acc" %in% names(df), "gene" %in% names(df))
na_genes <- (is.na(df$gene)) | (stringr::str_length(df$gene) == 0)
df$gene <- as.character(df$gene)
df$gene[na_genes] <- as.character(df$prot_acc[na_genes])
invisible(df)
}
View(temp2)
temp3 <- temp2 %>%
dplyr::filter(is.na(gene)) %>%
replace_na_genes(acc_type)
temp4 <- temp2 %>%
dplyr::filter(is.na(gene)) %>%
na_genes_by_acc(acc_type)
temp4 <- temp2 %>%
dplyr::filter(is.na(gene)) %>%
na_genes_by_acc()
View(temp4)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM_mq(group_psm_by, group_pep_by, fasta, expt_smry, rm_krts,
plot_rptr_int, plot_log2FC_cv, use_lowercase_aa, ...)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM_mq(group_psm_by, group_pep_by, fasta, expt_smry, rm_krts,
plot_rptr_int, plot_log2FC_cv, use_lowercase_aa, ...)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "~\\proteoQ\\examples"
load_expts()
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM_mq(group_psm_by, group_pep_by, fasta, expt_smry, rm_krts,
plot_rptr_int, plot_log2FC_cv, use_lowercase_aa, ...)
plot_log2FC_cv
TMT_plex > 0
plot_rptr_int
plot_log2FC_cv && TMT_plex > 0
sd_violin(df = df, id = !!group_psm_by,
filepath = file.path(dat_dir, "PSM\\log2FC_cv\\raw",
paste0(gsub("_PSM_N", "", out_fn[injn_idx, 1]), "_sd.png")),
width = 8, height = 8, type = "log2_R", adjSD = FALSE, is_psm = TRUE)
p
rm(p)
suppressWarnings(
p <- ggplot() +
geom_violin(df_sd, mapping = aes(x = Channel, y = SD, fill = Channel), size = .25, draw_quantiles = c(.95, .99)) +
geom_boxplot(df_sd, mapping = aes(x = Channel, y = SD), width = 0.1, lwd = .2, fill = "white") +
stat_summary(df_sd, mapping = aes(x = Channel, y = SD), fun = "mean", geom = "point",
shape=23, size=2, fill="white", alpha=.5) +
labs(title = expression(""), x = expression("Channel"), y = expression("SD ("*log[2]*"FC)"))
)
p
suppressWarnings(
try(eval(my_call, caller_env()))
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "~\\proteoQ\\examples_mascot"
load_expts()
library(proteoQDA)
# FASTA (all platforms)
copy_refseq_hs("~\\proteoQ\\dbs\\fasta\\refseq")
copy_refseq_mm("~\\proteoQ\\dbs\\fasta\\refseq")
dir.create(dat_dir, recursive = TRUE, showWarnings = FALSE)
copy_global_mascot(dat_dir)
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
load_expts(dat_dir)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM(group_psm_by, group_pep_by, fasta, expt_smry, plot_rptr_int, plot_log2FC_cv, ...)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM(group_psm_by, group_pep_by, fasta, expt_smry, plot_rptr_int, plot_log2FC_cv, ...)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM(group_psm_by, group_pep_by, fasta, expt_smry, plot_rptr_int, plot_log2FC_cv, ...)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM(group_psm_by, group_pep_by, fasta, expt_smry, plot_rptr_int, plot_log2FC_cv, ...)
df_sd <- df %>%
calcSD_Splex(id = group_psm_by, type = "log2_R") %>%
`names<-`(gsub("^log2_R", "sd_log2_R", names(.))) %>%
dplyr::right_join(df, by = group_psm_by)
df_sd <- df %>%
calcSD_Splex(id = group_psm_by, type = "log2_R") %>%
`names<-`(gsub("^log2_R", "sd_log2_R", names(.)))
View(df_sd)
str(df_sd)
str(df$pep_seq_mod)
group_psm_by
df_sd <- df %>%
dplyr::mutate(!!group_psm_by := as.character(!!rlang::sym(group_psm_by)))
df2 = df
sym(group_psm_by)
sym(group_psm_by)
ensym(group_psm_by)
df <- df %>%
dplyr::mutate(!!group_psm_by := as.character(!!rlang::sym(group_psm_by)))
df_sd <- df %>%
calcSD_Splex(id = group_psm_by, type = "log2_R") %>%
`names<-`(gsub("^log2_R", "sd_log2_R", names(.)))
df <- df2
df_sd <- df %>%
calcSD_Splex(id = group_psm_by, type = "log2_R") %>%
`names<-`(gsub("^log2_R", "sd_log2_R", names(.)))
temp <- df %>%
dplyr::mutate(!!group_psm_by := as.character(!!rlang::sym(group_psm_by))) %>%
dplyr::left_join(df_sd, by = group_psm_by) %>%
dplyr::mutate_at(vars(grep("I[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 0)) %>%
dplyr::mutate_at(vars(grep("^log2_R[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 3)) %>%
dplyr::mutate_at(vars(grep("^N_log2_R[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 3)) %>%
dplyr::mutate_at(vars(grep("^sd_log2_R[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 4)) %>%
na_genes_by_acc()
names(temp)
temp2 <- df %>%
calcSD_Splex(id = group_psm_by, type = "log2_R") %>%
`names<-`(gsub("^log2_R", "sd_log2_R", names(.))) %>%
dplyr::right_join(df, by = group_psm_by) %>%
dplyr::mutate_at(vars(grep("I[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 0)) %>%
dplyr::mutate_at(vars(grep("^log2_R[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 3)) %>%
dplyr::mutate_at(vars(grep("^N_log2_R[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 3)) %>%
dplyr::mutate_at(vars(grep("^sd_log2_R[0-9]{3}[NC]*", names(.))), ~ round(.x, digits = 4)) %>%
na_genes_by_acc()
names(temp2)
df <- df2
df <- df %>%
dplyr::mutate(!!group_psm_by := as.character(!!rlang::sym(group_psm_by)))
df_sd <- df %>%
calcSD_Splex(id = group_psm_by, type = "log2_R") %>%
`names<-`(gsub("^log2_R", "sd_log2_R", names(.)))
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
annotPSM(group_psm_by, group_pep_by, fasta, expt_smry, plot_rptr_int, plot_log2FC_cv, ...)
plot_rptr_int
TMT_plex
plot_log2FC_cv
plot_log2FC_cv && TMT_plex > 0
sd_violin(df = df, id = !!group_psm_by,
filepath = file.path(dat_dir, "PSM\\log2FC_cv\\raw",
paste0(gsub("_PSM_N", "", out_fn[injn_idx, 1]), "_sd.png")),
width = 8, height = 8, type = "log2_R", adjSD = FALSE, is_psm = TRUE)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "~\\proteoQ\\examples_sm"
load_expts()
library(proteoQDA)
# FASTA (all platforms)
copy_refseq_hs("~\\proteoQ\\dbs\\fasta\\refseq")
copy_refseq_mm("~\\proteoQ\\dbs\\fasta\\refseq")
dir.create(dat_dir, recursive = TRUE, showWarnings = FALSE)
copy_global_sm(dat_dir)
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
load_expts()
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
suppressMessages(
df <- purrr::map(file.path(dat_dir, filelist), readr::read_delim, delim = ";") %>%
dplyr::bind_rows()
)
df <- purrr::map(file.path(dat_dir, filelist), readr::read_delim, delim = ";") %>%
dplyr::bind_rows()
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
Uni2Entrez(species = "my human", abbr_species = Hu, filename = my_human.rds, overwrite = TRUE)
library(proteoQ)
Uni2Entrez(species = "my human", abbr_species = Hu, filename = my_human.rds, overwrite = TRUE)
?anal_prnString
?as_label
foo <- quote(foo)
bar <- sym("bar")
library(rlang)
foo <- quote(foo)
bar <- sym("bar")
foo
bar
as_name(foo)
as_name(bar)
typeof(bar)
typeof(as_name(bar))
as_name(quo(foo))
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "C:\\Results\\Limbrick\\020"
load_expts()
load_expts()
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "C:\\Results\\Limbrick\\020"
load_expts(dat_dir)
View(uniprot_species)
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = TRUE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = TRUE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
x
x
x
x
x
x
x
x
x
x2 = x
gofOutlier_obj <- rosnerTest(as.numeric(x), 9)
suppressWarnings(gofOutlier_obj <- rosnerTest(as.numeric(x), 9))
gofOutlier_obj
gofOutlier_obj$n.outliers
?prnGSPA
?prepGO
?prepMSig
prepMSig(species = mouse, filename = msig_mm.rds)
head(readRDS(file.path("~\\proteoQ\\dbs\\msig\\msig_mm.rds")))
prepMSig(
# species = dog,
abbr_species = Cf,
ortho_mart = cfamiliaris_gene_ensembl,
filename = msig_cf.rds,
)
library(devtools)
setwd("C:\\Results\\R\\proteoQ")
document()
warnings()
check()
install(
)
